---
layout: default
title: River Tournament
---

<h1 id="tournament-date" style="text-align: center; font-size: 2rem; margin: 1rem 0;">Loading Bracket...</h1>

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem;">
  <div style="flex: 1; min-width: 300px; max-width: 500px;">
    <h2 style="text-align: center;">Bracket</h2>
    <table id="bracket" style="width: 100%; border-collapse: collapse; background-color: var(--slate);">
      <thead>
        <tr style="background-color: var(--dark-navy); color: var(--white);">
          <th>First Name</th>
          <th>Last Initial</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div style="flex: 1; min-width: 300px; max-width: 500px;">
    <h2 style="text-align: center;">Waitlist</h2>
    <table id="waitlist" style="width: 100%; border-collapse: collapse; background-color: var(--slate);">
      <thead>
        <tr style="background-color: var(--dark-navy); color: var(--white);">
          <th>First Name</th>
          <th>Last Initial</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
  // Format date for header
  function getNextThursday() {
    const today = new Date();
    const dayOfWeek = today.getDay();
    const daysUntilThursday = (4 - dayOfWeek + 7) % 7 || 7;
    const nextThursday = new Date(today.getTime() + daysUntilThursday * 24 * 60 * 60 * 1000);
    const options = { month: 'short', day: 'numeric' };
    return nextThursday.toLocaleDateString('en-US', options);
  }

  document.getElementById('tournament-date').textContent = `${getNextThursday()} Bracket`;

  // Load player data
  fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vT5ck-1B7HvfNdb83vap3DeZJNT4PBWdLeNoGIm5WM7BbxVw-8nIa0VAVEfo3iv3G5Zs8W5vHt-Wjnr/pub?output=csv')
    .then(response => response.text())
    .then(data => {
      const rows = data.trim().split('\n').slice(1).map(row => row.split(','));
      const bracketBody = document.querySelector('#bracket tbody');
      const waitlistBody = document.querySelector('#waitlist tbody');

      let bracketCount = 0;
      let waitlistCount = 0;

      rows.forEach(row => {
        const [firstName, lastName, , , , , , approved] = row;
        const lastInitial = lastName ? lastName.charAt(0) : '';

        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${firstName}</td><td>${lastInitial}</td>`;

        if (approved === 'TRUE' && bracketCount < 16) {
          bracketBody.appendChild(tr);
          bracketCount++;
        } else if (waitlistCount < 16) {
          waitlistBody.appendChild(tr);
          waitlistCount++;
        }
      });
    })
    .catch(error => console.error('Error fetching data:', error));
</script>
