---
layout: default
title: Tournament Calendar
bodyClass: page-location
permalink: /calendar/
---

<main class="content-wrapper page-location">
  <h1 class="page-title">Tournament Calendar</h1>
  <p class="flyer-detail">
    Check out our upcoming tournaments below. Click any event for details or to add it to your own calendar!
  </p>

  <section class="upcoming-tournaments flyer-section">
    <h2>Upcoming Tournaments</h2>
    <ul id="upcoming-tournaments">
      <li>Loading tournaments...</li>
    </ul>
  </section>

  <div class="iframe-wrapper" style="margin-top:2em;">
    <iframe 
      src="https://calendar.google.com/calendar/embed?src=198eded4195a8995d1a1486ed6a92657a0c76bc9aaf1291c74a4763d1c791f7f%40group.calendar.google.com&ctz=America%2FLos_Angeles&mode=AGENDA"
      style="border:0; background:transparent;" 
      width="100%" 
      height="700" 
      frameborder="0" 
      scrolling="no"
      title="River Tournaments Google Calendar"
      loading="lazy">
    </iframe>
  </div>

  <p class="note" style="margin-top:2em;">
    Want to add these tournaments to your calendar? Click the <b>+</b> button at the bottom right of the calendar, or click any event for details.
  </p>

  <!-- Google Calendar API fetch for Upcoming Tournaments -->
  <script>
    // ======= Google API Key provided =======
    const API_KEY = "AIzaSyBLNdT-6xsYi3_lzSdEVMM3WSYT-X8PVy8";
    // =======================================

    const calendarId = '198eded4195a8995d1a1486ed6a92657a0c76bc9aaf1291c74a4763d1c791f7f@group.calendar.google.com';
    const maxResults = 3;

    const upcomingUl = document.getElementById('upcoming-tournaments');
    upcomingUl.innerHTML = '<li>Loading tournaments...</li>';

    // Format a date for display
    function formatDate(start) {
      const date = new Date(start.dateTime || start.date);
      const options = { weekday: 'short', month: 'short', day: 'numeric' };
      return date.toLocaleDateString(undefined, options);
    }

    // Fetch upcoming events from Google Calendar API
    fetch(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events?key=${API_KEY}&orderBy=startTime&singleEvents=true&timeMin=${(new Date()).toISOString()}&maxResults=${maxResults}`)
      .then(res => res.json())
      .then(data => {
        upcomingUl.innerHTML = '';
        if (!data.items || data.items.length === 0) {
          upcomingUl.innerHTML = '<li>No upcoming tournaments found.</li>';
          return;
        }
        data.items.forEach(event => {
          const dateStr = formatDate(event.start);
          let summary = event.summary || 'Tournament';
          let description = event.description ? `<span class="flyer-detail" style="margin-left:1em;">${event.description}</span>` : '';
          let html = `
            <li style="margin-bottom: 0.6em;">
              <span class="flyer-gold" style="display:inline-block; min-width: 6em;">${dateStr}</span>
              <span class="flyer-caps" style="margin-left:1em;">${summary}</span>
              ${description}
            </li>
          `;
          upcomingUl.innerHTML += html;
        });
      })
      .catch(err => {
        upcomingUl.innerHTML = '<li>Unable to load tournaments.</li>';
      });
  </script>
</main>